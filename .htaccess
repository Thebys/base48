# Caching Rules
<IfModule mod_expires.c>
  ExpiresActive On
  
  # Default expiration: 1 week
  ExpiresDefault "access plus 1 week"
  
  # Document html, xml, json, etc.
  ExpiresByType text/html "access plus 0 seconds"
  ExpiresByType text/xml "access plus 0 seconds"
  ExpiresByType application/json "access plus 0 seconds"
  
  # Images
  ExpiresByType image/gif "access plus 1 day"
  ExpiresByType image/png "access plus 1 day"
  ExpiresByType image/jpg "access plus 1 day"
  ExpiresByType image/jpeg "access plus 1 day"
  ExpiresByType image/webp "access plus 1 day"
  ExpiresByType image/svg+xml "access plus 1 day"
  ExpiresByType image/x-icon "access plus 1 day"
  
  # CSS, JavaScript
  ExpiresByType text/css "access plus 1 day"
  ExpiresByType text/javascript "access plus 1 day"
  ExpiresByType application/javascript "access plus 1 day"
</IfModule>

# ETags
<IfModule mod_headers.c>
  Header unset ETag
</IfModule>
FileETag None

# Security Headers
<IfModule mod_headers.c>
  # XSS Protection
  Header set X-XSS-Protection "1; mode=block"
  
  # Prevent MIME-type sniffing
  Header set X-Content-Type-Options "nosniff"
  
  # Clickjacking protection
  Header set X-Frame-Options "SAMEORIGIN"
  
  # Referrer Policy
  Header set Referrer-Policy "strict-origin-when-cross-origin"
  
  # Content Security Policy (modern security addition)
  # Header set Content-Security-Policy "default-src 'self';"
</IfModule>

# Prevent Directory Listing
Options -Indexes

# Custom 404 Error Page
ErrorDocument 404 /404.html

# Prevent access to hidden files - Apache 2.4 syntax
<FilesMatch "^\.">
  Require all denied
</FilesMatch>

# Block access to sensitive files - Apache 2.4 syntax
<FilesMatch "(^#.*#|\.(bak|config|dist|fla|inc|ini|log|psd|sh|sql|sw[op])|~)$">
  Require all denied
</FilesMatch>

# Force HTTPS (uncomment if you have SSL)
# RewriteEngine On
# RewriteCond %{HTTPS} off
# RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

# Allow Cross-Origin Resource Sharing for specific domains
# <IfModule mod_headers.c>
#   Header set Access-Control-Allow-Origin "example.com"
# </IfModule>

# Cache-Control Headers
<IfModule mod_headers.c>
  <FilesMatch "\.(ico|pdf|jpg|jpeg|png|gif|webp)$">
    Header set Cache-Control "max-age=2592000, public"
  </FilesMatch>
  <FilesMatch "\.(css|js)$">
    Header set Cache-Control "max-age=604800, public"
  </FilesMatch>
  <FilesMatch "\.(html|htm|xml|txt)$">
    Header set Cache-Control "max-age=0, must-revalidate"
  </FilesMatch>
</IfModule>